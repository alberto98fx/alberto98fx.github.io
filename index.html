<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ðŸš€ Thesis Progress</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
  </head>
  <style>
      body{
          padding: 10px;
      }
      hr {
  margin-top: 1rem;
  margin-bottom: 1rem;
  border: 1;
  border-top: 5px solid rgba(0, 0, 0, 0.1);
}
  </style>
  <body>
      <div class="container">
            <h1>ðŸš€ Thesis Progress</h1>

            <div id="overall" class="progress progress-striped active">
                <div class="progress-bar" data-values="20">0</div>
            </div>

            <p>Torino magica: un racconto</p>
            <div id="torino-magica" class="progress">
                <div class="progress-bar progress-bar-success" data-values="100">0</div>
            </div>

                
            <p>AttivitÃ  di valorizzazione</p>
            <div id="valorizzazione" class="progress">
                <div class="progress-bar progress-bar-info" data-values="100">0</div>
            </div>

            <p>Torino: promozione e veicolazione</p>
            <div id="promozione" class="progress">
                <div class="progress-bar progress-bar-info" data-values="100">0</div>
            </div>

            <p>Oltre i confini della cittÃ </p>
            <div id="confini" class="progress">
                <div class="progress-bar progress-bar-info" data-values="0">0</div>
            </div>

            <p>Delineazione della committenza</p>
            <!-- <div class="progress">
                <div class="progress-bar progress-bar-success" data-values="60">0</div>
                <div class="progress-bar" data-values="40">0</div>
            </div> -->
            <div id="committenza" class="progress">
                <div class="progress-bar progress-bar-info" data-values="100">0</div>
            </div>

      </div>
  
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
    <script>
     
    function getProgress(id) {
        var progress = 0;
        $("#" + id + " .progress-bar").each(function () {
            progress += parseInt($(this).attr("data-values"));
        });
        console.log(progress);
        return progress;
    }

    $(".progress div").each(function () {

    var average_progress = 0;
        average_progress += getProgress("torino-magica");
        average_progress += getProgress("valorizzazione");
        average_progress += getProgress("committenza");
        average_progress += getProgress("confini");
        average_progress += getProgress("promozione");
        average_progress = average_progress / 5;

        $("#overall .progress-bar").attr("data-values", average_progress);
         var display = $(this),
             currentValue = parseInt(display.text()),
             nextValue = $(this).attr("data-values"),
             diff = nextValue - currentValue,
             step = (0 < diff ? 1 : -1);
         if (nextValue == "0") {
            
             $(display).css("padding", "0");
         } else {

             $(display).css("color", "#fff").animate({
                 "width": nextValue + "%"
             }, "slow");
         }
         for (var i = 0; i < Math.abs(diff); ++i) {
             setTimeout(function () {
                 currentValue += step
                 display.html(currentValue + "%");
             }, 20 * i);
         }
        });
    </script>
  </body>
</html>
